
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Installation Guide &#8212; xgboost 1.0.0-SNAPSHOT documentation</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://assets.readthedocs.org/static/css/badge_only.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Get Started with XGBoost" href="get_started.html" />
    <link rel="prev" title="XGBoost Documentation" href="index.html" />
  
   

  
<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="build.html" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "build"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="get_started.html" title="Get Started with XGBoost"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="XGBoost Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">xgboost 1.0.0-SNAPSHOT documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="build.html#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="index.html" class="text-logo">XGBoost</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="build.html#">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_started.html">Get Started with XGBoost</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">XGBoost Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discuss.xgboost.ai">XGBoost User Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu/index.html">GPU support</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameter.html">XGBoost Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="python/index.html">Python package</a></li>
<li class="toctree-l1"><a class="reference internal" href="R-package/index.html">R package</a></li>
<li class="toctree-l1"><a class="reference internal" href="jvm/index.html">JVM package</a></li>
<li class="toctree-l1"><a class="reference internal" href="julia.html">Julia package</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib/index.html">Contribute to XGBoost</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>Installation Guide</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="installation-guide">
<h1>Installation Guide<a class="headerlink" href="build.html#installation-guide" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pre-built binary wheel for Python</p>
<p>If you are planning to use Python, consider installing XGBoost from a pre-built binary wheel, available from Python Package Index (PyPI). You may download and install it by running</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ensure that you are downloading one of the following:</span>
<span class="c1">#   * xgboost-{version}-py2.py3-none-manylinux1_x86_64.whl</span>
<span class="c1">#   * xgboost-{version}-py2.py3-none-win_amd64.whl</span>
pip3 install xgboost
</pre></div>
</div>
<ul class="simple">
<li><p>The binary wheel will support GPU algorithms (<cite>gpu_exact</cite>, <cite>gpu_hist</cite>) on machines with NVIDIA GPUs. Please note that <strong>training with multiple GPUs is only supported for Linux platform</strong>. See <a class="reference internal" href="gpu/index.html"><span class="doc">XGBoost GPU Support</span></a>.</p></li>
<li><p>Currently, we provide binary wheels for 64-bit Linux and Windows.</p></li>
</ul>
</div>
<div class="section" id="building-xgboost-from-source">
<h2>Building XGBoost from source<a class="headerlink" href="build.html#building-xgboost-from-source" title="Permalink to this headline">¶</a></h2>
<p>This page gives instructions on how to build and install XGBoost from scratch on various systems. It consists of two steps:</p>
<ol class="arabic simple">
<li><p>First build the shared library from the C++ codes (<code class="docutils literal notranslate"><span class="pre">libxgboost.so</span></code> for Linux/OSX and <code class="docutils literal notranslate"><span class="pre">xgboost.dll</span></code> for Windows).
(For R-package installation, please directly refer to <a class="reference internal" href="build.html#r-package-installation">R Package Installation</a>.)</p></li>
<li><p>Then install the language packages (e.g. Python Package).</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use of Git submodules</p>
<p>XGBoost uses Git submodules to manage dependencies. So when you clone the repo, remember to specify <code class="docutils literal notranslate"><span class="pre">--recursive</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone --recursive https://github.com/dmlc/xgboost
</pre></div>
</div>
</div>
<p>For windows users who use github tools, you can open the git shell and type the following command:</p>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>git submodule init
git submodule update
</pre></div>
</div>
<p>Please refer to <a class="reference internal" href="build.html#trouble-shooting">Trouble Shooting</a> section first if you have any problem
during installation. If the instructions do not work for you, please feel free
to ask questions at <a class="reference external" href="https://discuss.xgboost.ai">the user forum</a>.</p>
<p><strong>Contents</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="build.html#building-the-shared-library">Building the Shared Library</a></p>
<ul>
<li><p><a class="reference internal" href="build.html#building-on-ubuntu-debian">Building on Ubuntu/Debian</a></p></li>
<li><p><a class="reference internal" href="build.html#building-on-osx">Building on OSX</a></p></li>
<li><p><a class="reference internal" href="build.html#building-on-windows">Building on Windows</a></p></li>
<li><p><a class="reference internal" href="build.html#building-with-gpu-support">Building with GPU support</a></p></li>
<li><p><a class="reference internal" href="build.html#customized-building">Customized Building</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="build.html#python-package-installation">Python Package Installation</a></p></li>
<li><p><a class="reference internal" href="build.html#r-package-installation">R Package Installation</a></p></li>
<li><p><a class="reference internal" href="build.html#trouble-shooting">Trouble Shooting</a></p></li>
<li><p><a class="reference internal" href="build.html#building-the-documentation">Building the documentation</a></p></li>
</ul>
</div>
<div class="section" id="building-the-shared-library">
<span id="build-shared-lib"></span><h2>Building the Shared Library<a class="headerlink" href="build.html#building-the-shared-library" title="Permalink to this headline">¶</a></h2>
<p>Our goal is to build the shared library:</p>
<ul class="simple">
<li><p>On Linux/OSX the target library is <code class="docutils literal notranslate"><span class="pre">libxgboost.so</span></code></p></li>
<li><p>On Windows the target library is <code class="docutils literal notranslate"><span class="pre">xgboost.dll</span></code></p></li>
</ul>
<p>The minimal building requirement is</p>
<ul class="simple">
<li><p>A recent C++ compiler supporting C++11 (g++-4.8 or higher)</p></li>
<li><p>CMake 3.2 or higher</p></li>
</ul>
<div class="section" id="building-on-ubuntu-debian">
<h3>Building on Ubuntu/Debian<a class="headerlink" href="build.html#building-on-ubuntu-debian" title="Permalink to this headline">¶</a></h3>
<p>On Ubuntu, one builds XGBoost by running CMake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone --recursive https://github.com/dmlc/xgboost
<span class="nb">cd</span> xgboost
mkdir build
<span class="nb">cd</span> build
cmake ..
make -j4
</pre></div>
</div>
</div>
<div class="section" id="building-on-osx">
<h3>Building on OSX<a class="headerlink" href="build.html#building-on-osx" title="Permalink to this headline">¶</a></h3>
<div class="section" id="install-with-pip-simple-method">
<h4>Install with pip: simple method<a class="headerlink" href="build.html#install-with-pip-simple-method" title="Permalink to this headline">¶</a></h4>
<p>First, obtain <code class="docutils literal notranslate"><span class="pre">gcc-8</span></code> with Homebrew (<a class="reference external" href="https://brew.sh/">https://brew.sh/</a>) to enable multi-threading (i.e. using multiple CPU threads for training). The default Apple Clang compiler does not support OpenMP, so using the default compiler would have disabled multi-threading.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install gcc@8
</pre></div>
</div>
<p>Then install XGBoost with <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install xgboost
</pre></div>
</div>
<p>You might need to run the command with <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag if you run into permission errors.</p>
</div>
<div class="section" id="build-from-the-source-code-advanced-method">
<h4>Build from the source code - advanced method<a class="headerlink" href="build.html#build-from-the-source-code-advanced-method" title="Permalink to this headline">¶</a></h4>
<p>Obtain <code class="docutils literal notranslate"><span class="pre">gcc-8</span></code> from Homebrew:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install gcc@8
</pre></div>
</div>
<p>Now clone the repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone --recursive https://github.com/dmlc/xgboost
</pre></div>
</div>
<p>Create the <code class="docutils literal notranslate"><span class="pre">build/</span></code> directory and invoke CMake. Make sure to add <code class="docutils literal notranslate"><span class="pre">CC=gcc-8</span> <span class="pre">CXX=g++-8</span></code> so that Homebrew GCC is selected. After invoking CMake, you can build XGBoost with <code class="docutils literal notranslate"><span class="pre">make</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
<span class="nv">CC</span><span class="o">=</span>gcc-8 <span class="nv">CXX</span><span class="o">=</span>g++-8 cmake ..
make -j4
</pre></div>
</div>
<p>You may now continue to <a class="reference internal" href="build.html#python-package-installation">Python Package Installation</a>.</p>
</div>
</div>
<div class="section" id="building-on-windows">
<h3>Building on Windows<a class="headerlink" href="build.html#building-on-windows" title="Permalink to this headline">¶</a></h3>
<p>You need to first clone the XGBoost repo with <code class="docutils literal notranslate"><span class="pre">--recursive</span></code> option, to clone the submodules.
We recommend you use <a class="reference external" href="https://git-for-windows.github.io/">Git for Windows</a>, as it comes with a standard Bash shell. This will highly ease the installation process.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git submodule init
git submodule update
</pre></div>
</div>
<p>XGBoost support compilation with Microsoft Visual Studio and MinGW.</p>
<div class="section" id="compile-xgboost-with-microsoft-visual-studio">
<h4>Compile XGBoost with Microsoft Visual Studio<a class="headerlink" href="build.html#compile-xgboost-with-microsoft-visual-studio" title="Permalink to this headline">¶</a></h4>
<p>To build with Visual Studio, we will need CMake. Make sure to install a recent version of CMake. Then run the following from the root of the XGBoost directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake .. -G<span class="s2">&quot;Visual Studio 14 2015 Win64&quot;</span>
</pre></div>
</div>
<p>This specifies an out of source build using the Visual Studio 64 bit generator. (Change the <code class="docutils literal notranslate"><span class="pre">-G</span></code> option appropriately if you have a different version of Visual Studio installed.) Open the <code class="docutils literal notranslate"><span class="pre">.sln</span></code> file in the build directory and build with Visual Studio.</p>
<p>After the build process successfully ends, you will find a <code class="docutils literal notranslate"><span class="pre">xgboost.dll</span></code> library file inside <code class="docutils literal notranslate"><span class="pre">./lib/</span></code> folder.</p>
</div>
<div class="section" id="compile-xgboost-using-mingw">
<h4>Compile XGBoost using MinGW<a class="headerlink" href="build.html#compile-xgboost-using-mingw" title="Permalink to this headline">¶</a></h4>
<p>After installing <a class="reference external" href="https://git-for-windows.github.io/">Git for Windows</a>, you should have a shortcut named <code class="docutils literal notranslate"><span class="pre">Git</span> <span class="pre">Bash</span></code>. You should run all subsequent steps in <code class="docutils literal notranslate"><span class="pre">Git</span> <span class="pre">Bash</span></code>.</p>
<p>In MinGW, <code class="docutils literal notranslate"><span class="pre">make</span></code> command comes with the name <code class="docutils literal notranslate"><span class="pre">mingw32-make</span></code>. You can add the following line into the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">make</span><span class="o">=</span><span class="s1">&#39;mingw32-make&#39;</span>
</pre></div>
</div>
<p>(On 64-bit Windows, you should get <a class="reference external" href="https://sourceforge.net/projects/mingw-w64/">MinGW64</a> instead.) Make sure
that the path to MinGW is in the system PATH.</p>
<p>To build with MinGW, type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp make/mingw64.mk config.mk<span class="p">;</span> make -j4
</pre></div>
</div>
<p>See <a class="reference internal" href="build.html#mingw-python"><span class="std std-ref">Building XGBoost library for Python for Windows with MinGW-w64 (Advanced)</span></a> for buildilng XGBoost for Python.</p>
</div>
</div>
<div class="section" id="building-with-gpu-support">
<span id="build-gpu-support"></span><h3>Building with GPU support<a class="headerlink" href="build.html#building-with-gpu-support" title="Permalink to this headline">¶</a></h3>
<p>XGBoost can be built with GPU support for both Linux and Windows using CMake. GPU support works with the Python package as well as the CLI version. See <a class="reference internal" href="build.html#installing-r-package-with-gpu-support">Installing R package with GPU support</a> for special instructions for R.</p>
<p>An up-to-date version of the CUDA toolkit is required.</p>
<p>From the command line on Linux starting from the XGBoost directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake .. -DUSE_CUDA<span class="o">=</span>ON
make -j4
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Enabling distributed GPU training</p>
<p>By default, distributed GPU training is disabled and only a single GPU will be used. To enable distributed GPU training, set the option <code class="docutils literal notranslate"><span class="pre">USE_NCCL=ON</span></code>. Distributed GPU training depends on NCCL2, available at <a class="reference external" href="https://developer.nvidia.com/nccl">this link</a>. Since NCCL2 is only available for Linux machines, <strong>distributed GPU training is available only for Linux</strong>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake .. -DUSE_CUDA<span class="o">=</span>ON -DUSE_NCCL<span class="o">=</span>ON -DNCCL_ROOT<span class="o">=</span>/path/to/nccl2
make -j4
</pre></div>
</div>
</div>
<p>On Windows, run CMake as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake .. -G<span class="s2">&quot;Visual Studio 14 2015 Win64&quot;</span> -DUSE_CUDA<span class="o">=</span>ON
</pre></div>
</div>
<p>(Change the <code class="docutils literal notranslate"><span class="pre">-G</span></code> option appropriately if you have a different version of Visual Studio installed.)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Visual Studio 2017 Win64 Generator may not work</p>
<p>Choosing the Visual Studio 2017 generator may cause compilation failure. When it happens, specify the 2015 compiler by adding the <code class="docutils literal notranslate"><span class="pre">-T</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make .. -G<span class="s2">&quot;Visual Studio 15 2017 Win64&quot;</span> -T v140,cuda<span class="o">=</span><span class="m">8</span>.0 -DUSE_CUDA<span class="o">=</span>ON
</pre></div>
</div>
</div>
<p>To speed up compilation, the compute version specific to your GPU could be passed to cmake as, e.g., <code class="docutils literal notranslate"><span class="pre">-DGPU_COMPUTE_VER=50</span></code>.
The above cmake configuration run will create an <code class="docutils literal notranslate"><span class="pre">xgboost.sln</span></code> solution file in the build directory. Build this solution in release mode as a x64 build, either from Visual studio or from command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build . --target xgboost --config Release
</pre></div>
</div>
<p>To speed up compilation, run multiple jobs in parallel by appending option <code class="docutils literal notranslate"><span class="pre">--</span> <span class="pre">/MP</span></code>.</p>
</div>
<div class="section" id="customized-building">
<h3>Customized Building<a class="headerlink" href="build.html#customized-building" title="Permalink to this headline">¶</a></h3>
<p>We recommend the use of CMake for most use cases. See the full range of building options in CMakeLists.txt.</p>
<p>Alternatively, you may use Makefile. The Makefile uses a configuration file <code class="docutils literal notranslate"><span class="pre">config.mk</span></code>, which lets you modify several compilation flags:
- Whether to enable support for various distributed filesystems such as HDFS and Amazon S3
- Which compiler to use
- And some more</p>
<p>To customize, first copy <code class="docutils literal notranslate"><span class="pre">make/config.mk</span></code> to the project root and then modify the copy.</p>
</div>
<div class="section" id="python-package-installation">
<h3>Python Package Installation<a class="headerlink" href="build.html#python-package-installation" title="Permalink to this headline">¶</a></h3>
<p>The Python package is located at <code class="docutils literal notranslate"><span class="pre">python-package/</span></code>.
There are several ways to install the package:</p>
<ol class="arabic simple">
<li><p>Install system-wide, which requires root permission:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> python-package<span class="p">;</span> sudo python setup.py install
</pre></div>
</div>
<p>You will however need Python <code class="docutils literal notranslate"><span class="pre">distutils</span></code> module for this to
work. It is often part of the core Python package or it can be installed using your
package manager, e.g. in Debian use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install python-setuptools
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Re-compiling XGBoost</p>
<p>If you recompiled XGBoost, then you need to reinstall it again to make the new library take effect.</p>
</div>
<ol class="arabic simple" start="2">
<li><p>Only set the environment variable <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> to tell Python where to find
the library. For example, assume we cloned <code class="docutils literal notranslate"><span class="pre">xgboost</span></code> on the home directory
<code class="docutils literal notranslate"><span class="pre">~</span></code>. then we can added the following line in <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>.
This option is <strong>recommended for developers</strong> who change the code frequently. The changes will be immediately reflected once you pulled the code and rebuild the project (no need to call <code class="docutils literal notranslate"><span class="pre">setup</span></code> again).</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span>~/xgboost/python-package
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Install only for the current user.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> python-package<span class="p">;</span> python setup.py develop --user
</pre></div>
</div>
<div class="section" id="building-xgboost-library-for-python-for-windows-with-mingw-w64-advanced">
<span id="mingw-python"></span><h4>Building XGBoost library for Python for Windows with MinGW-w64 (Advanced)<a class="headerlink" href="build.html#building-xgboost-library-for-python-for-windows-with-mingw-w64-advanced" title="Permalink to this headline">¶</a></h4>
<p>Windows versions of Python are built with Microsoft Visual Studio. Usually Python binary modules are built with the same compiler the interpreter is built with. However, you may not be able to use Visual Studio, for following reasons:</p>
<ol class="arabic simple">
<li><p>VS is proprietary and commercial software. Microsoft provides a freeware “Community” edition, but its licensing terms impose restrictions as to where and how it can be used.</p></li>
<li><p>Visual Studio contains telemetry, as documented in <a class="reference external" href="https://visualstudio.microsoft.com/license-terms/mt736442/">Microsoft Visual Studio Licensing Terms</a>. Running software with telemetry may be against the policy of your organization.</p></li>
</ol>
<p>So you may want to build XGBoost with GCC own your own risk. This presents some difficulties because MSVC uses Microsoft runtime and MinGW-w64 uses own runtime, and the runtimes have different incompatible memory allocators. But in fact this setup is usable if you know how to deal with it. Here is some experience.</p>
<ol class="arabic simple">
<li><p>The Python interpreter will crash on exit if XGBoost was used. This is usually not a big issue.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-O3</span></code> is OK.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-mtune=native</span></code> is also OK.</p></li>
<li><p>Don’t use <code class="docutils literal notranslate"><span class="pre">-march=native</span></code> gcc flag. Using it causes the Python interpreter to crash if the DLL was actually used.</p></li>
<li><p>You may need to provide the lib with the runtime libs. If <code class="docutils literal notranslate"><span class="pre">mingw32/bin</span></code> is not in <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, build a wheel (<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">bdist_wheel</span></code>), open it with an archiver and put the needed dlls to the directory where <code class="docutils literal notranslate"><span class="pre">xgboost.dll</span></code> is situated. Then you can install the wheel with <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p></li>
</ol>
</div>
</div>
<div class="section" id="r-package-installation">
<h3>R Package Installation<a class="headerlink" href="build.html#r-package-installation" title="Permalink to this headline">¶</a></h3>
<div class="section" id="installing-pre-packaged-version">
<h4>Installing pre-packaged version<a class="headerlink" href="build.html#installing-pre-packaged-version" title="Permalink to this headline">¶</a></h4>
<p>You can install xgboost from CRAN just like any other R package:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;xgboost&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For OSX users, single-threaded version will be installed. So only one thread will be used for training. To enable use of multiple threads (and utilize capacity of multi-core CPUs), see the section <a class="reference internal" href="build.html#osx-multithread"><span class="std std-ref">Installing R package on Mac OSX with multi-threading</span></a> to install XGBoost from source.</p>
</div>
<div class="section" id="installing-the-development-version">
<h4>Installing the development version<a class="headerlink" href="build.html#installing-the-development-version" title="Permalink to this headline">¶</a></h4>
<p>Make sure you have installed git and a recent C++ compiler supporting C++11 (e.g., g++-4.8 or higher).
On Windows, Rtools must be installed, and its bin directory has to be added to <code class="docutils literal notranslate"><span class="pre">PATH</span></code> during the installation.</p>
<p>Due to the use of git-submodules, <code class="docutils literal notranslate"><span class="pre">devtools::install_github</span></code> can no longer be used to install the latest version of R package.
Thus, one has to run git to check out the code first:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone --recursive https://github.com/dmlc/xgboost
<span class="nb">cd</span> xgboost
git submodule init
git submodule update
<span class="nb">cd</span> R-package
R CMD INSTALL .
</pre></div>
</div>
<p>If the last line fails because of the error <code class="docutils literal notranslate"><span class="pre">R:</span> <span class="pre">command</span> <span class="pre">not</span> <span class="pre">found</span></code>, it means that R was not set up to run from command line.
In this case, just start R as you would normally do and run the following:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">setwd</span><span class="p">(</span><span class="s">&#39;wherever/you/cloned/it/xgboost/R-package/&#39;</span><span class="p">)</span>
<span class="nf">install.packages</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">,</span> <span class="n">repos</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;source&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The package could also be built and installed with CMake (and Visual C++ 2015 on Windows) using instructions from <a class="reference internal" href="build.html#r-gpu-support"><span class="std std-ref">Installing R package with GPU support</span></a>, but without GPU support (omit the <code class="docutils literal notranslate"><span class="pre">-DUSE_CUDA=ON</span></code> cmake parameter).</p>
<p>If all fails, try <a class="reference internal" href="build.html#building-the-shared-library">Building the shared library</a> to see whether a problem is specific to R package or not.</p>
</div>
<div class="section" id="installing-r-package-on-mac-osx-with-multi-threading">
<span id="osx-multithread"></span><h4>Installing R package on Mac OSX with multi-threading<a class="headerlink" href="build.html#installing-r-package-on-mac-osx-with-multi-threading" title="Permalink to this headline">¶</a></h4>
<p>First, obtain <code class="docutils literal notranslate"><span class="pre">gcc-8</span></code> with Homebrew (<a class="reference external" href="https://brew.sh/">https://brew.sh/</a>) to enable multi-threading (i.e. using multiple CPU threads for training). The default Apple Clang compiler does not support OpenMP, so using the default compiler would have disabled multi-threading.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install gcc@8
</pre></div>
</div>
<p>Now, clone the repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone --recursive https://github.com/dmlc/xgboost
</pre></div>
</div>
<p>Create the <code class="docutils literal notranslate"><span class="pre">build/</span></code> directory and invoke CMake with option <code class="docutils literal notranslate"><span class="pre">R_LIB=ON</span></code>. Make sure to add <code class="docutils literal notranslate"><span class="pre">CC=gcc-8</span> <span class="pre">CXX=g++-8</span></code> so that Homebrew GCC is selected. After invoking CMake, you can install the R package by running <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
<span class="nv">CC</span><span class="o">=</span>gcc-7 <span class="nv">CXX</span><span class="o">=</span>g++-7 cmake .. -DR_LIB<span class="o">=</span>ON
make -j4
make install
</pre></div>
</div>
</div>
<div class="section" id="installing-r-package-with-gpu-support">
<span id="r-gpu-support"></span><h4>Installing R package with GPU support<a class="headerlink" href="build.html#installing-r-package-with-gpu-support" title="Permalink to this headline">¶</a></h4>
<p>The procedure and requirements are similar as in <a class="reference internal" href="build.html#building-with-gpu-support">Building with GPU support</a>, so make sure to read it first.</p>
<p>On Linux, starting from the XGBoost directory type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake .. -DUSE_CUDA<span class="o">=</span>ON -DR_LIB<span class="o">=</span>ON
make install -j
</pre></div>
</div>
<p>When default target is used, an R package shared library would be built in the <code class="docutils literal notranslate"><span class="pre">build</span></code> area.
The <code class="docutils literal notranslate"><span class="pre">install</span></code> target, in addition, assembles the package files with this shared library under <code class="docutils literal notranslate"><span class="pre">build/R-package</span></code> and runs <code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">CMD</span> <span class="pre">INSTALL</span></code>.</p>
<p>On Windows, CMake with Visual C++ Build Tools (or Visual Studio) has to be used to build an R package with GPU support. Rtools must also be installed (perhaps, some other MinGW distributions with <code class="docutils literal notranslate"><span class="pre">gendef.exe</span></code> and <code class="docutils literal notranslate"><span class="pre">dlltool.exe</span></code> would work, but that was not tested).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake .. -G<span class="s2">&quot;Visual Studio 14 2015 Win64&quot;</span> -DUSE_CUDA<span class="o">=</span>ON -DR_LIB<span class="o">=</span>ON
cmake --build . --target install --config Release
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">--target</span> <span class="pre">xgboost</span></code> is used, an R package DLL would be built under <code class="docutils literal notranslate"><span class="pre">build/Release</span></code>.
The <code class="docutils literal notranslate"><span class="pre">--target</span> <span class="pre">install</span></code>, in addition, assembles the package files with this dll under <code class="docutils literal notranslate"><span class="pre">build/R-package</span></code> and runs <code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">CMD</span> <span class="pre">INSTALL</span></code>.</p>
<p>If cmake can’t find your R during the configuration step, you might provide the location of its executable to cmake like this: <code class="docutils literal notranslate"><span class="pre">-DLIBR_EXECUTABLE=&quot;C:/Program</span> <span class="pre">Files/R/R-3.4.1/bin/x64/R.exe&quot;</span></code>.</p>
<p>If on Windows you get a “permission denied” error when trying to write to …Program Files/R/… during the package installation, create a <code class="docutils literal notranslate"><span class="pre">.Rprofile</span></code> file in your personal home directory (if you don’t already have one in there), and add a line to it which specifies the location of your R packages user library, like the following:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">.libPaths</span><span class="p">(</span> <span class="nf">unique</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;C:/Users/USERNAME/Documents/R/win-library/3.4&quot;</span><span class="p">,</span> <span class="nf">.libPaths</span><span class="p">())))</span>
</pre></div>
</div>
<p>You might find the exact location by running <code class="docutils literal notranslate"><span class="pre">.libPaths()</span></code> in R GUI or RStudio.</p>
</div>
</div>
<div class="section" id="trouble-shooting">
<h3>Trouble Shooting<a class="headerlink" href="build.html#trouble-shooting" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Compile failed after <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code></p>
<p>Please first update the submodules, clean all and recompile:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git submodule update <span class="o">&amp;&amp;</span> make clean_all <span class="o">&amp;&amp;</span> make -j4
</pre></div>
</div>
</li>
<li><p>Compile failed after <code class="docutils literal notranslate"><span class="pre">config.mk</span></code> is modified</p>
<p>Need to clean all first:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make clean_all <span class="o">&amp;&amp;</span> make -j4
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Makefile:</span> <span class="pre">dmlc-core/make/dmlc.mk:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code></p>
<p>We need to recursively clone the submodule:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git submodule init
git submodule update
</pre></div>
</div>
<p>Alternatively, do another clone</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/dmlc/xgboost --recursive
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="building-the-documentation">
<h3>Building the Documentation<a class="headerlink" href="build.html#building-the-documentation" title="Permalink to this headline">¶</a></h3>
<p>XGBoost uses <a class="reference external" href="https://www.sphinx-doc.org/en/stable/">Sphinx</a> for documentation.  To build it locally, you need a installed XGBoost with all its dependencies along with:</p>
<ul class="simple">
<li><p>System dependencies</p>
<ul>
<li><p>git</p></li>
<li><p>graphviz</p></li>
</ul>
</li>
<li><p>Python dependencies</p>
<ul>
<li><p>sphinx</p></li>
<li><p>breathe</p></li>
<li><p>guzzle_sphinx_theme</p></li>
<li><p>recommonmark</p></li>
<li><p>mock</p></li>
</ul>
</li>
</ul>
<p>Under <code class="docutils literal notranslate"><span class="pre">xgboost/doc</span></code> directory, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">&lt;format&gt;</span></code> with <code class="docutils literal notranslate"><span class="pre">&lt;format&gt;</span></code> replaced by the format you want.  For a list of supported formats, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">help</span></code> under the same directory.</p>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="index.html" title="previous chapter (use the left arrow)">XGBoost Documentation</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="get_started.html" title="next chapter (use the right arrow)">Get Started with XGBoost</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="get_started.html" title="Get Started with XGBoost"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="XGBoost Documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">xgboost 1.0.0-SNAPSHOT documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2019, xgboost developers. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>